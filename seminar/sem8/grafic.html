<!DOCTYPE html>
<html>
<head>
    <title> Imagine - Grafic</title>
</head>
<body>
    <form>
        <input id="valori" type="text" value="12,13,3,2,1,10,7,18">
        <input id="btnGrafic" type="button" value="Grafic">
        <input id="unghi" type="text" value="1.52">
    </form>
    <canvas id="grafic" width="500" height="500"></canvas>
    <script type="text/javascript">
        var canvas = document.getElementById("grafic");
        var context = canvas.getContext("2d");

        function deseneazaGrafic(){
            var valori = document.getElementById("valori").value.split(",");
            console.log(valori);
            var h = canvas.height;
            var w = canvas.width / valori.length;

            context.fillStyle = "#DEDEDE";
            context.fillRect(0,0,canvas.width,canvas.height);

            context.fillStyle = "orange";
            context.strokeStyle = "black";
            context.lineWidth = 2;

            var f=h*0.9/Math.max.apply(Math,valori);

            console.log("proportia"+f);

            for(var i=0;i<valori.length;i++){
                context.beginPath();
                context.fillRect((i+0.1)*w,h-valori[i]*f,w*0.8,valori[i]*f);

                context.fill();
                context.stroke();
            }
        }
        function roteste(theta,x,y){
            var ct=Math.cos(theta);
            var st=Math.sin(theta);

            context.transform(ct,-st,st,ct,-x*ct-y*st+x,x*st-y*ct+y);
        }
        document.getElementById("btnGrafic").onclick = function() {
            //context.fillStyle="#F00";
            //context.fillRect(0,0,canvas.width,canvas.height);

            var theta = document.getElementById("unghi").value;

            //context.translate(250,250);
            //context.rotate(theta);
            //contetx.translate(-250,-250);

            //roteste(theta,50,50)

            //context.setTransform(1,0,1,0,1,1,0,0);
            deseneazaGrafic();
        }
        deseneazaGrafic();
    </script>
</body>
</html>